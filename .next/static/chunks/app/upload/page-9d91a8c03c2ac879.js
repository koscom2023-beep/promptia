(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{2370:function(e,t,s){Promise.resolve().then(s.bind(s,708))},708:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var l=s(7437),a=s(2265),r=s(6281),n=s(970);let i=a.forwardRef((e,t)=>{let{className:s="",...a}=e;return(0,l.jsx)("div",{ref:t,className:"rounded-lg border bg-white text-gray-950 shadow-sm ".concat(s),...a})});i.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:s="",...a}=e;return(0,l.jsx)("div",{ref:t,className:"flex flex-col space-y-1.5 p-6 ".concat(s),...a})});o.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:s="",...a}=e;return(0,l.jsx)("h3",{ref:t,className:"text-2xl font-semibold leading-none tracking-tight ".concat(s),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s="",...a}=e;return(0,l.jsx)("p",{ref:t,className:"text-sm text-gray-500 ".concat(s),...a})});d.displayName="CardDescription";let u=a.forwardRef((e,t)=>{let{className:s="",...a}=e;return(0,l.jsx)("div",{ref:t,className:"p-6 pt-0 ".concat(s),...a})});u.displayName="CardContent";let m=a.forwardRef((e,t)=>{let{className:s="",type:a,...r}=e;return(0,l.jsx)("input",{type:a,className:"flex h-10 w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ".concat(s),ref:t,...r})});m.displayName="Input";let h=a.forwardRef((e,t)=>{let{className:s="",...a}=e;return(0,l.jsx)("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ".concat(s),ref:t,...a})});h.displayName="Textarea";let x=a.forwardRef((e,t)=>{let{className:s="",variant:a="default",size:r="default",...n}=e;return(0,l.jsx)("button",{className:"".concat("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"," ").concat({default:"bg-gray-900 text-white hover:bg-gray-800",outline:"border border-gray-200 bg-white hover:bg-gray-100",ghost:"hover:bg-gray-100"}[a]," ").concat({default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8"}[r]," ").concat(s),ref:t,...n})});x.displayName="Button";let f=a.createContext(void 0),v=e=>{let{value:t,onValueChange:s,children:a,className:r=""}=e;return(0,l.jsx)(f.Provider,{value:{value:t,onValueChange:s},children:(0,l.jsx)("div",{className:r,children:a})})},p=a.forwardRef((e,t)=>{let{className:s="",...a}=e;return(0,l.jsx)("div",{ref:t,className:"inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500 ".concat(s),...a})});p.displayName="TabsList";let g=a.forwardRef((e,t)=>{let{className:s="",value:r,...n}=e,i=a.useContext(f);if(!i)throw Error("TabsTrigger must be used within Tabs");let o=i.value===r;return(0,l.jsx)("button",{ref:t,className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ".concat(o?"bg-white text-gray-950 shadow-sm":"text-gray-500 hover:text-gray-900"," ").concat(s),onClick:()=>i.onValueChange(r),...n})});g.displayName="TabsTrigger";let b=a.forwardRef((e,t)=>{let{className:s="",value:r,...n}=e,i=a.useContext(f);if(!i)throw Error("TabsContent must be used within Tabs");return i.value!==r?null:(0,l.jsx)("div",{ref:t,className:"mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 ".concat(s),...n})});function j(){let{user:e}=(0,r.a)(),t=(0,n.e)(),[s,f]=(0,a.useState)("novel"),[j,w]=(0,a.useState)(!1),[y,N]=(0,a.useState)(""),[_,C]=(0,a.useState)(""),[S,R]=(0,a.useState)(""),[A,F]=(0,a.useState)(""),[T,U]=(0,a.useState)(""),[E,L]=(0,a.useState)(""),[P,k]=(0,a.useState)(""),[I,q]=(0,a.useState)(""),[B,D]=(0,a.useState)(""),[O,V]=(0,a.useState)(""),[K,M]=(0,a.useState)(""),[X,Y]=(0,a.useState)(""),[z,G]=(0,a.useState)(""),[H,J]=(0,a.useState)(""),Q=async s=>{if(s.preventDefault(),!e){alert("로그인이 필요합니다.");return}if(!y.trim()||!A.trim()){alert("제목과 내용을 입력해주세요.");return}if("".concat(T," ").concat(E," ").concat(P).trim().length<300){alert("작가의 말(사용한 프롬프트, 제작 의도, 세계관 설명)을 총 300자 이상 입력해주세요. 이는 AdSense 승인을 위해 필요합니다.");return}w(!0);try{let{data:s,error:l}=await t.from("novels").insert({user_id:e.id,title:y,description:_||null,category:"novel",cover_image_url:S||null,prompt_used:T||null,creation_intent:E||null,worldview_description:P||null}).select().single();if(l)throw l;let{error:a}=await t.from("episodes").insert({novel_id:s.id,user_id:e.id,title:"1화",content:A,episode_number:1});if(a)throw a;alert("소설이 성공적으로 업로드되었습니다!"),N(""),C(""),R(""),F(""),U(""),L(""),k("")}catch(e){console.error("소설 업로드 실패:",e),alert("업로드 중 오류가 발생했습니다.")}finally{w(!1)}},W=async s=>{if(s.preventDefault(),!e){alert("로그인이 필요합니다.");return}if(!I.trim()||!K.trim()){alert("제목과 이미지 URL을 입력해주세요.");return}if("".concat(X," ").concat(z," ").concat(H).trim().length<300){alert("작가의 말(사용한 프롬프트, 제작 의도, 세계관 설명)을 총 300자 이상 입력해주세요. 이는 AdSense 승인을 위해 필요합니다.");return}w(!0);try{let s=K.split("\n").map(e=>e.trim()).filter(e=>e.length>0);if(0===s.length){alert("최소 하나의 이미지 URL이 필요합니다."),w(!1);return}let{data:l,error:a}=await t.from("novels").insert({user_id:e.id,title:I,description:B||null,category:"webtoon",cover_image_url:O||s[0]||null,prompt_used:X||null,creation_intent:z||null,worldview_description:H||null}).select().single();if(a)throw a;let{error:r}=await t.from("episodes").insert({novel_id:l.id,user_id:e.id,title:"1화",image_urls:s,episode_number:1});if(r)throw r;alert("웹툰이 성공적으로 업로드되었습니다!"),q(""),D(""),V(""),M(""),Y(""),G(""),J("")}catch(e){console.error("웹툰 업로드 실패:",e),alert("업로드 중 오류가 발생했습니다.")}finally{w(!1)}};return(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"작품 업로드"}),(0,l.jsxs)(v,{value:s,onValueChange:e=>f(e),children:[(0,l.jsxs)(p,{className:"mb-6",children:[(0,l.jsx)(g,{value:"novel",children:"소설"}),(0,l.jsx)(g,{value:"webtoon",children:"웹툰"})]}),(0,l.jsx)(b,{value:"novel",children:(0,l.jsxs)(i,{children:[(0,l.jsxs)(o,{children:[(0,l.jsx)(c,{children:"소설 업로드"}),(0,l.jsx)(d,{children:"새로운 소설 작품을 업로드하세요."})]}),(0,l.jsx)(u,{children:(0,l.jsxs)("form",{onSubmit:Q,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"novel-title",className:"text-sm font-medium",children:"제목 *"}),(0,l.jsx)(m,{id:"novel-title",value:y,onChange:e=>N(e.target.value),placeholder:"소설 제목을 입력하세요",required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"novel-description",className:"text-sm font-medium",children:"설명"}),(0,l.jsx)(h,{id:"novel-description",value:_,onChange:e=>C(e.target.value),placeholder:"소설에 대한 간단한 설명을 입력하세요",rows:3})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"novel-cover",className:"text-sm font-medium",children:"표지 이미지 URL"}),(0,l.jsx)(m,{id:"novel-cover",type:"url",value:S,onChange:e=>R(e.target.value),placeholder:"https://example.com/cover.jpg"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"novel-content",className:"text-sm font-medium",children:"내용 *"}),(0,l.jsx)(h,{id:"novel-content",value:A,onChange:e=>F(e.target.value),placeholder:"소설 내용을 입력하세요",rows:10,required:!0})]}),(0,l.jsxs)("div",{className:"border-t pt-4 mt-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"작가의 말 * (AdSense 승인을 위해 필수)"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"총 300자 이상 입력해주세요. 이 정보는 구글 검색 최적화와 AdSense 승인에 도움이 됩니다."}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"novel-prompt",className:"text-sm font-medium",children:"사용한 프롬프트"}),(0,l.jsx)(h,{id:"novel-prompt",value:T,onChange:e=>U(e.target.value),placeholder:"이 작품을 만들 때 사용한 AI 프롬프트를 입력하세요",rows:3})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"novel-intent",className:"text-sm font-medium",children:"제작 의도"}),(0,l.jsx)(h,{id:"novel-intent",value:E,onChange:e=>L(e.target.value),placeholder:"이 작품을 만들게 된 의도나 목적을 설명해주세요",rows:3})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"novel-worldview",className:"text-sm font-medium",children:"세계관 설명"}),(0,l.jsx)(h,{id:"novel-worldview",value:P,onChange:e=>k(e.target.value),placeholder:"작품의 배경이 되는 세계관이나 설정을 설명해주세요",rows:3})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:["현재 입력된 글자 수: ","".concat(T," ").concat(E," ").concat(P).trim().length," / 300자"]})]})]}),(0,l.jsx)(x,{type:"submit",disabled:j,className:"w-full",children:j?"업로드 중...":"업로드"})]})})]})}),(0,l.jsx)(b,{value:"webtoon",children:(0,l.jsxs)(i,{children:[(0,l.jsxs)(o,{children:[(0,l.jsx)(c,{children:"웹툰 업로드"}),(0,l.jsx)(d,{children:"새로운 웹툰 작품을 업로드하세요. 이미지 URL을 한 줄에 하나씩 입력하세요."})]}),(0,l.jsx)(u,{children:(0,l.jsxs)("form",{onSubmit:W,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"webtoon-title",className:"text-sm font-medium",children:"제목 *"}),(0,l.jsx)(m,{id:"webtoon-title",value:I,onChange:e=>q(e.target.value),placeholder:"웹툰 제목을 입력하세요",required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"webtoon-description",className:"text-sm font-medium",children:"설명"}),(0,l.jsx)(h,{id:"webtoon-description",value:B,onChange:e=>D(e.target.value),placeholder:"웹툰에 대한 간단한 설명을 입력하세요",rows:3})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"webtoon-cover",className:"text-sm font-medium",children:"표지 이미지 URL"}),(0,l.jsx)(m,{id:"webtoon-cover",type:"url",value:O,onChange:e=>V(e.target.value),placeholder:"https://example.com/cover.jpg"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"webtoon-images",className:"text-sm font-medium",children:"이미지 URL * (한 줄에 하나씩 입력)"}),(0,l.jsx)(h,{id:"webtoon-images",value:K,onChange:e=>M(e.target.value),placeholder:"https://example.com/image1.jpg https://example.com/image2.jpg https://example.com/image3.jpg",rows:10,required:!0}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:"각 이미지 URL을 새 줄에 입력하세요. 빈 줄은 무시됩니다."})]}),(0,l.jsxs)("div",{className:"border-t pt-4 mt-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"작가의 말 * (AdSense 승인을 위해 필수)"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"총 300자 이상 입력해주세요. 이 정보는 구글 검색 최적화와 AdSense 승인에 도움이 됩니다."}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"webtoon-prompt",className:"text-sm font-medium",children:"사용한 프롬프트"}),(0,l.jsx)(h,{id:"webtoon-prompt",value:X,onChange:e=>Y(e.target.value),placeholder:"이 작품을 만들 때 사용한 AI 프롬프트를 입력하세요",rows:3})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"webtoon-intent",className:"text-sm font-medium",children:"제작 의도"}),(0,l.jsx)(h,{id:"webtoon-intent",value:z,onChange:e=>G(e.target.value),placeholder:"이 작품을 만들게 된 의도나 목적을 설명해주세요",rows:3})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"webtoon-worldview",className:"text-sm font-medium",children:"세계관 설명"}),(0,l.jsx)(h,{id:"webtoon-worldview",value:H,onChange:e=>J(e.target.value),placeholder:"작품의 배경이 되는 세계관이나 설정을 설명해주세요",rows:3})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:["현재 입력된 글자 수: ","".concat(X," ").concat(z," ").concat(H).trim().length," / 300자"]})]})]}),(0,l.jsx)(x,{type:"submit",disabled:j,className:"w-full",children:j?"업로드 중...":"업로드"})]})})]})})]})]})}b.displayName="TabsContent"},6281:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return o},a:function(){return i}});var l=s(7437),a=s(2265),r=s(970);let n=(0,a.createContext)({user:null,loading:!0});function i(){return(0,a.useContext)(n)}function o(e){let{children:t}=e,[s,i]=(0,a.useState)(null),[o,c]=(0,a.useState)(!0),d=(0,r.e)();return(0,a.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await d.auth.getUser();i(e)}catch(e){console.error("사용자 정보 가져오기 실패:",e),i(null)}finally{c(!1)}})();let{data:{subscription:e}}=d.auth.onAuthStateChange((e,t)=>{var s;i(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),c(!1)});return()=>{e.unsubscribe()}},[d]),(0,l.jsx)(n.Provider,{value:{user:s,loading:o},children:t})}},970:function(e,t,s){"use strict";s.d(t,{e:function(){return a}});var l=s(7903);function a(){let e="https://udwsneemyesoyvenfwrg.supabase.co",t="sb_publishable_KqAxnVj63a7TzMfRIJ_-9w_upw8hGa9";if(!e||!t)throw Error("Missing Supabase environment variables. Please check your .env.local file and ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set.");return(0,l.AY)(e,t)}}},function(e){e.O(0,[903,971,117,744],function(){return e(e.s=2370)}),_N_E=e.O()}]);